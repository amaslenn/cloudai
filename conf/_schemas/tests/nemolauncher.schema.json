{
  "$defs": {
    "Cluster": {
      "additionalProperties": false,
      "description": "Cluster configuration.",
      "properties": {
        "gpus_per_node": {
          "default": 8,
          "title": "Gpus Per Node",
          "type": "integer"
        }
      },
      "title": "Cluster",
      "type": "object"
    },
    "ExpManager": {
      "additionalProperties": false,
      "description": "Experiment manager configuration.",
      "properties": {
        "create_checkpoint_callback": {
          "default": false,
          "title": "Create Checkpoint Callback",
          "type": "boolean"
        }
      },
      "title": "ExpManager",
      "type": "object"
    },
    "NeMoLauncherCmdArgs": {
      "additionalProperties": false,
      "description": "NeMoLauncher test command arguments.",
      "properties": {
        "repository_url": {
          "default": "https://github.com/NVIDIA/NeMo-Framework-Launcher.git",
          "title": "Repository Url",
          "type": "string"
        },
        "repository_commit_hash": {
          "default": "599ecfcbbd64fd2de02f2cc093b1610d73854022",
          "title": "Repository Commit Hash",
          "type": "string"
        },
        "launcher_script": {
          "default": "launcher_scripts/main.py",
          "title": "Launcher Script",
          "type": "string"
        },
        "docker_image_url": {
          "default": "nvcr.io/nvidia/nemo:24.05.01",
          "title": "Docker Image Url",
          "type": "string"
        },
        "stages": {
          "default": "[\"training\"]",
          "title": "Stages",
          "type": "string"
        },
        "numa_mapping": {
          "$ref": "#/$defs/NumaMapping"
        },
        "cluster": {
          "$ref": "#/$defs/Cluster"
        },
        "training": {
          "$ref": "#/$defs/Training"
        }
      },
      "title": "NeMoLauncherCmdArgs",
      "type": "object"
    },
    "NumaMapping": {
      "additionalProperties": false,
      "description": "NUMA mapping configuration.",
      "properties": {
        "enable": {
          "default": true,
          "title": "Enable",
          "type": "boolean"
        }
      },
      "title": "NumaMapping",
      "type": "object"
    },
    "Trainer": {
      "additionalProperties": false,
      "description": "Trainer configuration.",
      "properties": {
        "max_steps": {
          "default": 20,
          "title": "Max Steps",
          "type": "integer"
        },
        "val_check_interval": {
          "default": 10,
          "title": "Val Check Interval",
          "type": "integer"
        },
        "log_every_n_steps": {
          "default": "1",
          "enum": [
            "1",
            "2"
          ],
          "title": "Log Every N Steps",
          "type": "string"
        },
        "enable_checkpointing": {
          "default": false,
          "title": "Enable Checkpointing",
          "type": "boolean"
        }
      },
      "title": "Trainer",
      "type": "object"
    },
    "Training": {
      "additionalProperties": false,
      "description": "Training configuration.",
      "properties": {
        "values": {
          "default": "gpt3/40b_improved",
          "title": "Values",
          "type": "string"
        },
        "exp_manager": {
          "$ref": "#/$defs/ExpManager"
        },
        "trainer": {
          "$ref": "#/$defs/Trainer"
        },
        "model": {
          "$ref": "#/$defs/TrainingModel"
        },
        "run": {
          "$ref": "#/$defs/TrainingRun"
        }
      },
      "title": "Training",
      "type": "object"
    },
    "TrainingModel": {
      "additionalProperties": false,
      "description": "Training model configuration.",
      "properties": {
        "global_batch_size": {
          "default": 128,
          "title": "Global Batch Size",
          "type": "integer"
        },
        "micro_batch_size": {
          "default": 2,
          "title": "Micro Batch Size",
          "type": "integer"
        },
        "tensor_model_parallel_size": {
          "default": 4,
          "title": "Tensor Model Parallel Size",
          "type": "integer"
        },
        "pipeline_model_parallel_size": {
          "default": 4,
          "title": "Pipeline Model Parallel Size",
          "type": "integer"
        },
        "data": {
          "$ref": "#/$defs/TrainingModelData"
        }
      },
      "title": "TrainingModel",
      "type": "object"
    },
    "TrainingModelData": {
      "additionalProperties": false,
      "description": "Training model data configuration.",
      "properties": {
        "data_prefix": {
          "default": "[]",
          "title": "Data Prefix",
          "type": "string"
        },
        "data_impl": {
          "default": "mock",
          "title": "Data Impl",
          "type": "string"
        }
      },
      "title": "TrainingModelData",
      "type": "object"
    },
    "TrainingRun": {
      "additionalProperties": false,
      "description": "Training run configuration.",
      "properties": {
        "time_limit": {
          "default": "3:00:00",
          "title": "Time Limit",
          "type": "string"
        },
        "name": {
          "default": "run",
          "title": "Name",
          "type": "string"
        }
      },
      "title": "TrainingRun",
      "type": "object"
    }
  },
  "additionalProperties": false,
  "description": "Test object for NeMoLauncher.",
  "properties": {
    "name": {
      "title": "Name",
      "type": "string"
    },
    "description": {
      "title": "Description",
      "type": "string"
    },
    "test_template_name": {
      "title": "Test Template Name",
      "type": "string"
    },
    "cmd_args": {
      "$ref": "#/$defs/NeMoLauncherCmdArgs"
    },
    "extra_env_vars": {
      "additionalProperties": {
        "type": "string"
      },
      "default": {},
      "title": "Extra Env Vars",
      "type": "object"
    },
    "extra_cmd_args": {
      "additionalProperties": {
        "type": "string"
      },
      "default": {},
      "title": "Extra Cmd Args",
      "type": "object"
    }
  },
  "required": [
    "name",
    "description",
    "test_template_name",
    "cmd_args"
  ],
  "title": "NeMoLauncherTestDefinition",
  "type": "object"
}